<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Index Page</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link id="themeStylesheet" rel="stylesheet" href="light-theme.css"> <!-- Default theme -->
    <style>
        .dropdown-menu {
            display: none;
            position: absolute;
            right: 0;
            background-color: white;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .dropdown-menu.show {
            display: block;
        }

        .user-dropdown {
            position: relative;
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">Lost and Found</a>
            <div class="collapse navbar-collapse">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link" href="form.html">Submit Found Item</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="report.html">Submit Lost Item</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="list.html">View Lost and Found Items</a>
                    </li>
                    <!-- Updated link to claim.html -->
                    <li class="nav-item">
                        <a class="nav-link" href="claim.html">Claim Lost Items</a>
                    </li>
                </ul>
                <div class="user-dropdown">
                    <button id="userButton" class="btn btn-light">
                        Hello, Guest
                    </button>
                    <ul id="userDropdown" class="dropdown-menu">
                        <li><a class="dropdown-item" href="settings.html">Settings</a></li>
                        <li><a class="dropdown-item" href="#" id="logoutButton">Logout</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>

    <div class="container mt-5">
        <h1 class="text-center">Welcome to Lost and Found</h1>
    </div>

    <script>
        // Toggle dropdown visibility
        function toggleDropdown() {
            const dropdown = document.getElementById("userDropdown");
            dropdown.classList.toggle("show");
        }

        // Close the dropdown if the user clicks outside of it
        window.onclick = function(event) {
            if (!event.target.matches('#userButton')) {
                const dropdown = document.getElementById("userDropdown");
                if (dropdown && dropdown.classList.contains("show")) {
                    dropdown.classList.remove("show");
                }
            }
        };

        // Display the user's email in the greeting
        document.addEventListener('DOMContentLoaded', () => {
            const userEmail = localStorage.getItem('userEmail');
            const userButton = document.getElementById('userButton');

            if (userEmail) {
                userButton.textContent = `Hello, ${userEmail}`;
            }

            // Add click event to toggle the dropdown
            userButton.addEventListener('click', toggleDropdown);
        });

        // Logout functionality
        document.getElementById('logoutButton').addEventListener('click', () => {
            // Clear user email from localStorage
            localStorage.removeItem('userEmail');
            alert('You have been logged out.');
            // Redirect to login page
            window.location.href = "login.html";
        });

        // Load theme from localStorage if available
        const themeStylesheet = document.getElementById('themeStylesheet');

        function loadSavedTheme() {
            const savedTheme = localStorage.getItem('selectedTheme');
            if (savedTheme) {
                themeStylesheet.href = savedTheme;
            }
        }

        loadSavedTheme(); // Load theme on page load
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
